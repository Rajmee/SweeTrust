<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="sweet_trust">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/png" href="favicon.png"/>

  <title>sweet_trust</title>
  <link rel="manifest" href="manifest.json">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.ico" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/noui/nouislider.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   
    <script>
      $(document).ready(function () {
          $("#submit").click(function () {

          var title = $("#name").val();
          var areaname = $("#area").val();
          var priceFood = $("#price").val();
          var latitude = $("#lat").val();
          var longitude = $("#lng").val();
          var desc = $("#description").val();
          var imageUrl;
          
          


          $.post("http://192.168.0.100:3000/addFood", { description: desc, price: priceFood, title: title, latitude: latitude, longitude: longitude, area: areaname }, function (data) {
            if (data === 'yes') {
              alert("login success");
            }
          });
        });
      });


    </script>

    <style>
      .it .btn-orange
{
    background-color: blue;
    border-color: #777!important;
    color: #777;
    text-align: left;
  width:100%;
}
.it input.form-control
{
    
    border:none;
  margin-bottom:0px;
    border-radius: 0px;
    border-bottom: 1px solid #ddd;
    box-shadow: none;
}
.it .form-control:focus
{
    border-color: #ff4d0d;
    box-shadow: none;
    outline: none;
}
.fileUpload {
    position: relative;
    overflow: hidden;
}
.fileUpload input.upload {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
    font-size: 20px;
    cursor: pointer;
    opacity: 0;
    filter: alpha(opacity=0);
}
    </style>
</head>
<body>
  <!-- <h1>This is the test webpage</h1> -->
  <!-- This script installs service_worker.js to provide PWA functionality to
       application. For more information, see:
       https://developers.google.com/web/fundamentals/primers/service-workers -->
  <div class="container-contact100">
    <div class="wrap-contact100">
      <form class="contact100-form validate-form">
        <span class="contact100-form-title">
          Add Sweet Item
        </span>
  
        <div class="wrap-input100 validate-input bg1" data-validate="Please Type Your Name">
          <span class="label-input100">Sweet Name *</span>
          <input class="input100" type="text" id="name" name="name" placeholder="Enter Sweet Name">
        </div>
  
        <div class="wrap-input100 validate-input bg1 rs1-wrap-input100" data-validate="Enter Your Email (e@a.x)">
          <span class="label-input100">Area Name *</span>
          <input class="input100" type="text" id="area" name="area" placeholder="Enter Area Name ">
        </div>
  
        <div class="wrap-input100 bg1 rs1-wrap-input100">
          <span class="label-input100">Price</span>
          <input class="input100" type="text" id="price" name="price" placeholder="Enter Price">
        </div>

        <div class="wrap-input100 validate-input bg1 rs1-wrap-input100" data-validate="Enter Your Email (e@a.x)">
          <span class="label-input100">Latitude *</span>
          <input class="input100" type="text" id="lat" name="lat" placeholder="Enter Area Latitude ">
        </div>
        
        <div class="wrap-input100 bg1 rs1-wrap-input100">
          <span class="label-input100">Longitude *</span> 
          <input class="input100" type="text" id="lng" name="lng" placeholder="Enter Area Longitude">
        </div>


  
        <div class="wrap-input100 validate-input bg0 rs1-alert-validate" data-validate="Please Type Your Message">
          <span class="label-input100">Description</span>
          <textarea class="input100" id="description" name="description" placeholder="Enter sweet description here..."></textarea>
        </div>

    <div class="container">
      <div class="row">
        <div class="col-sm-offset-2 col-sm-12"><br><br>
          <div class="form-group">
            <div class="input-group">
              <input type="text" class="form-control" readonly>
              <div class="input-group-btn">
                <span class="fileUpload btn btn-success">
                  <span class="upl" id="upload">Upload sweet image</span>
                  <input type="file" class="upload up" id="up" onchange="readURL(this);" />
                </span><!-- btn-orange -->
              </div><!-- btn -->
            </div><!-- group -->
          </div><!-- form-group -->
        </div>
      </div>
    </div>

    <input type="file" id="photo">
    <button onclick="uploadImage()">Upload Image</button>
  
        <div class="container-contact100-form-btn">
          <button class="contact100-form-btn" id="submit">
            <span>
              Submit
              <i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>

  
  
  
  
  <!--===============================================================================================-->
  <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
  <!--===============================================================================================-->
  <script src="vendor/animsition/js/animsition.min.js"></script>
  <!--===============================================================================================-->
  <script src="vendor/bootstrap/js/popper.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <!--===============================================================================================-->
  <script src="vendor/select2/select2.min.js"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
 
  <script>
    $(".js-select2").each(function () {
      $(this).select2({
        minimumResultsForSearch: 20,
        dropdownParent: $(this).next('.dropDownSelect2')
      });


      $(".js-select2").each(function () {
        $(this).on('select2:close', function (e) {
          if ($(this).val() == "Please chooses") {
            $('.js-show-service').slideUp();
          }
          else {
            $('.js-show-service').slideUp();
            $('.js-show-service').slideDown();
          }
        });
      });
    })
  </script>
  <!--===============================================================================================-->
  <script src="vendor/daterangepicker/moment.min.js"></script>
  <script src="vendor/daterangepicker/daterangepicker.js"></script>
  <!--===============================================================================================-->
  <script src="vendor/countdowntime/countdowntime.js"></script>
  <!--===============================================================================================-->
  <script src="vendor/noui/nouislider.min.js"></script>
  <script>
    var filterBar = document.getElementById('filter-bar');

    noUiSlider.create(filterBar, {
      start: [1500, 3900],
      connect: true,
      range: {
        'min': 1500,
        'max': 7500
      }
    });

    var skipValues = [
      document.getElementById('value-lower'),
      document.getElementById('value-upper')
    ];

    filterBar.noUiSlider.on('update', function (values, handle) {
      skipValues[handle].innerHTML = Math.round(values[handle]);
      $('.contact100-form-range-value input[name="from-value"]').val($('#value-lower').html());
      $('.contact100-form-range-value input[name="to-value"]').val($('#value-upper').html());
    });
  </script>
  <!--===============================================================================================-->
  <script src="js/main.js"></script>

  <script>
    $(document).on('change', '.up', function () {
        var names = [];
        var length = $(this).get(0).files.length;
        for (var i = 0; i < $(this).get(0).files.length; ++i) {
          names.push($(this).get(0).files[i].name);
        }
        // $("input[name=file]").val(names);
        if (length > 2) {
          var fileName = names.join(', ');
          $(this).closest('.form-group').find('.form-control').attr("value", length + " files selected");
        }
        else {
          $(this).closest('.form-group').find('.form-control').attr("value", names);
        }
      });
  </script>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
  </script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('flutter_service_worker.js');
      });
    }
  </script>
  <script src="main.dart.js" type="application/javascript"></script>
</body>
<script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.22.0/firebase-storage.js"></script>


<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyAc6p9AIToEJNJ1BU_QG9lXxcOFx6wq2CM",
    authDomain: "sweet-trust-43bcd.firebaseapp.com",
    databaseURL: "https://sweet-trust-43bcd.firebaseio.com",
    projectId: "sweet-trust-43bcd",
    storageBucket: "sweet-trust-43bcd.appspot.com",
    messagingSenderId: "458659066472",
    appId: "1:458659066472:web:62d955c1c062c8ccd5c1dd"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  console.log(firebase)

  function uploadImage() {
    const ref = firebase.storage().ref()

    const file = document.querySelector("#photo").files[0]

    const name = new Date() + '-' + file.name

    const metadata = { contentType: file.type }
    const task = ref.child(name).put(file, metadata)

    task
      .then(snapshot => snapshot.ref.getDownloadURL())
      .then(url => {
        console.log(url)
        alert("Image Uploaded Successfully")
        imageUrl = url
      })

  }
</script>
</html>
